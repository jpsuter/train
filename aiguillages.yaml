select:
  - platform: template
    id: ${nom}
    name: "${nom}"
    optimistic: true
    options:
      - straight
      - turnout
    initial_option: straight
    on_value:
      then:
        - if:
            condition:
              - lambda: 'return id(${nom}).state == "straight";'
            then:
              - switch.turn_on: ${sortieS}
              - delay: 500ms
              - switch.turn_off: ${sortieS}
              - mqtt.publish:
                  topic: rocrail/service/client
                  payload: '<sw id="${nom}" cmd="straight"/>'
            else:
              - switch.turn_on: ${sortieT}
              - delay: 500ms
              - switch.turn_off: ${sortieT}
              - mqtt.publish:
                  topic: rocrail/service/client
                  payload: '<sw id="${nom}" cmd="turnout"/>'


